<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ZCM.Pages.AiChatPage"
    BackgroundColor="#1e1e1e">

    <Grid ColumnDefinitions="300,*"
          RowDefinitions="*"
          Padding="0">

        <!-- ========================= -->
        <!-- LEFT PANEL -->
        <!-- ========================= -->
        <Grid Grid.Column="0"
      RowDefinitions="Auto,Auto,*"
      Padding="16"
      BackgroundColor="#151515">

            <!-- Peer Dropdown -->
            <Picker
        Grid.Row="0"
        Title="Select AI Peer"
        ItemsSource="{Binding AiPeers}"
        ItemDisplayBinding="{Binding Display}"
        SelectedItem="{Binding SelectedPeer}"
        BackgroundColor="#1F1F1F"
        TextColor="White"
        HeightRequest="44"/>

            <!-- Model display (for selected peer) -->
            <Label Grid.Row="1"
           Margin="0,8,0,0"
           Text="{Binding SelectedPeer.ModelDisplay}"
           TextColor="#999999"
           FontSize="12"/>

            <!-- Conversation History (future) -->
            <CollectionView Grid.Row="2"
                    Margin="0,12,0,0"
                    ItemsSource="{Binding Conversations}">
            </CollectionView>

        </Grid>


        <!-- ========================= -->
        <!-- RIGHT PANEL -->
        <!-- ========================= -->
        <Grid Grid.Column="1"
              RowDefinitions="Auto,*,Auto"
              Padding="20"
              BackgroundColor="#1e1e1e">

            <!-- Status -->
            <Label Text="{Binding Status}"
                   TextColor="#CCCCCC"
                   FontSize="12"
                   Margin="0,0,0,10"/>

            <!-- Messages -->
            <CollectionView Grid.Row="1"
                            ItemsSource="{Binding Messages}"
                            SelectionMode="None">

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="12"
                               Margin="0,6"
                               CornerRadius="14"
                               HasShadow="False"
                               BackgroundColor="#1F1F1F">

                            <Label Text="{Binding Content}"
                                   TextColor="White"
                                   LineBreakMode="WordWrap"/>

                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>

            <!-- Input -->
            <Grid Grid.Row="2"
                  ColumnDefinitions="*,Auto"
                  Margin="0,12,0,0">

                <Entry Text="{Binding Prompt}"
                       Placeholder="Type a message..."
                       BackgroundColor="#2A2A2A"
                       TextColor="White"
                       HeightRequest="44"/>

                <Button Grid.Column="1"
                        Text="Send"
                        Command="{Binding SendCommand}"
                        Margin="8,0,0,0"
                        BackgroundColor="#6C5CE7"
                        TextColor="White"
                        CornerRadius="12"
                        HeightRequest="44"/>

            </Grid>

        </Grid>

    </Grid>

</ContentPage>
